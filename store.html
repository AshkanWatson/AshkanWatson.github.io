<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Store - Ashkan Watson">
    <meta name="author" content="Ashkan Watson">

    <title>Store - Ashkan Watson</title>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/store.css">
    <link rel="icon" href="./images/favicon.ico" type="image/x-icon">
    <style>
        .item-icon {
            width: 40px;
            height: 40px;
            background: rgba(25, 25, 25, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .item-icon img {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }
    </style>
</head>

<body>
    <!-- Categories Menu -->
    <div class="categories-menu">
        <button class="hamburger-btn">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
        </button>
        <div class="categories-dropdown">
            <div class="categories-content">
                <h3>Store Categories</h3>
                <ul>
                    <li><a href="?product=buy-me-coffee">Buy Me Coffee</a></li>
                    <li><a href="?product=notion-template">Notion Templates</a></li>
                    <li><a href="?product=watson-store">Watson Store</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="sidebar">
        <div class="nav-border">
            <div class="nav-inline"></div>
            <div class="nav-items">
                <!-- Home -->
                <a href="./index.html" class="nav-item" data-shortcut="1" data-label="Home">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Home</span>
                        <div class="shortcut">1</div>
                    </div>
                </a>
                <!-- Work -->
                <a href="./work.html?project=chandome-app" class="nav-item" data-shortcut="2" data-label="Work">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                            </path>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Work</span>
                        <div class="shortcut">2</div>
                    </div>
                </a>
                <!-- Blog -->
                <a href="./blog.html?post=ai-in-design" class="nav-item" data-shortcut="3" data-label="Blog">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Blog</span>
                        <div class="shortcut">3</div>
                    </div>
                </a>
                <!-- Store -->
                <a href="./store.html?product=buy-me-coffee" class="nav-item active" data-shortcut="4" data-label="Store">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Store</span>
                        <div class="shortcut">4</div>
                    </div>
                </a>
                <!-- About -->
                <a href="./about.html" class="nav-item" data-shortcut="5" data-label="About">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>About</span>
                        <div class="shortcut">5</div>
                    </div>
                </a>
                <!-- Contact -->
                <a href="./contact.html" class="nav-item" data-shortcut="6" data-label="Contact">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                            </path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Contact</span>
                        <div class="shortcut">6</div>
                    </div>
                </a>
                <!-- Search -->
                <div id="search-trigger" class="nav-item search-trigger" data-shortcut="/" data-search="true">
                    <div class="icon">
                        <svg viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </div>
                    <div class="tooltip">
                        <span>Search</span>
                        <div class="shortcut">/</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <div class="nav-items">
            <!-- Home -->
            <a href="./index.html" class="nav-item" data-shortcut="1">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </div>
            </a>

            <!-- Work -->
            <a href="./work.html?project=chandome-app" class="nav-item" data-shortcut="2">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                    </svg>
                </div>
            </a>

            <!-- Blog -->
            <a href="./blog.html?post=ai-in-design" class="nav-item" data-shortcut="3">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                </div>
            </a>

            <!-- Store -->
            <a href="./store.html?product=buy-me-coffee" class="nav-item active" data-shortcut="4">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                </div>
            </a>


            <!-- About -->
            <a href="./about.html" class="nav-item" data-shortcut="6">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-3.549 7a7 7 0 0 0-6.368 4.09c-.69 1.507.711 2.91 2.368 2.91h8c1.657 0 3.058-1.403 2.369-2.91A7 7 0 0 0 12.451 14Z"
                            fill="transparent" stroke-width="1.5" stroke-miterlimit="10" />
                    </svg>
                </div>
            </a>

            <!-- Contact -->
            <a href="./contact.html" class="nav-item" data-shortcut="7">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </div>
            </a>

            <!-- Search -->
            <a href="#" class="nav-item" data-search="true">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
            </a>
        </div>
    </nav>
    <div class="store-section-nav">
        <div class="section-header">
            <h2>Store</h2>
        </div>

        <div class="section-content">
            <div class="now-viewing">
                <span class="label">Now viewing</span>
                <div class="current-item">
                    <div class="item-icon">
                        <img src="" alt="Product Icon" id="currentProductIcon">
                    </div>
                    <div class="item-content">
                        <h3 id="currentProductTitle"></h3>
                        <p id="currentProductDesc"></p>
                    </div>
                </div>
            </div>

            <div class="store-categories">
                <span class="label">Categories</span>
                <div class="category-items">
                    <a href="?product=buy-me-coffee" class="store-item">
                        <div class="item-icon">
                            <img src="./images/buy.svg" alt="Buy Me Coffee Icon">
                        </div>
                        <div class="item-content">
                            <h3>Buy Me Coffee</h3>
                            <p>Support my work</p>
                        </div>
                    </a>
                    <a href="?product=notion-template" class="store-item">
                        <div class="item-icon">
                            <img src="./images/notion.svg" alt="Notion Icon">
                        </div>
                        <div class="item-content">
                            <h3>Notion Templates</h3>
                            <p>Productivity tools</p>
                        </div>
                    </a>
                    <a href="?product=watson-store" class="store-item">
                        <div class="item-icon">
                            <img src="./images/store.svg" alt="Store Icon">
                        </div>
                        <div class="item-content">
                            <h3>Watson Store</h3>
                            <p>E-commerce template</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <main class="store-detail">
        <div class="store-header">
            <div class="header-content">
                <div class="header-tags">
                    <span class="tag"></span>
                    <span class="tag"></span>
                </div>
                <h1 class="store-title"></h1>

                <div class="store-info-grid">
                    <div class="detail-row">
                        <div class="detail-label">Cost</div>
                        <div class="detail-value"></div>
                    </div>

                    <div class="detail-row">
                        <div class="detail-label">Type</div>
                        <div class="detail-value">Template</div>
                    </div>

                    <div class="detail-row">
                        <div class="detail-label">Deliverable</div>
                        <div class="detail-value">Framer File</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-primary">Buy for $49</button>
                    <button class="btn-secondary">See preview</button>
                </div>
            </div>
        </div>

        <div class="store-preview">
            <img src="./images/Chandome.avif" alt="Store Item Preview" class="preview-image">
        </div>

        <div class="store-content">
            <p>Introducing Ultra, a meticulously crafted portfolio template designed for Framer, featuring a minimalist
                sleek visual language.</p>

            <p>It features keyboard shortcuts for fluid page navigation and offers a dynamic web-app inspired way to
                view CMS content. Ultra is designed to be customizable enough to be tailored to any content, and adjusts
                effortlessly to different screen sizes, so it looks good on any device, reaching a wider audience.</p>

            <h2>Features</h2>
            <ul class="feature-list">
                <li>Keyboard shortcuts for fluid wayfinding</li>
                <li>Dynamic web-app inspired way of viewing CMS content</li>
                <li>Built-in text and color styles</li>
                <li>3 CMS collections for work, blog & store</li>
                <li>Responsive for all devices</li>
                <li>Site-wide search</li>
                <li>Available in light and dark mode</li>
            </ul>
        </div>
    </main>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <div class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" placeholder="Search..." class="search-input">
                <button type="button" class="search-button">
                    <span>Search</span>
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path d="M13 5l7 7-7 7M5 5l7 7-7 7" stroke="currentColor" fill="none" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div class="search-results">
                <!-- Search results will appear here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>© 2025 Ashkan by @AshkanWatson</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <span class="separator">·</span>
                <a href="#">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script type="module" src="js/main.js"></script>
    <script src="js/store.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded');

            // Navigation setup
            const navItems = document.querySelectorAll('a.nav-item[data-shortcut], div.nav-item[data-shortcut]');
            console.log('Found nav items:', navItems.length);

            // Load search index
            let searchIndex = null;

            async function loadSearchIndex() {
                try {
                    const response = await fetch('./data/searchData.json');
                    const data = await response.json();
                    searchIndex = data.items;
                    console.log('Search index loaded:', searchIndex.length, 'items');
                } catch (error) {
                    console.error('Error loading search index:', error);
                }
            }

            // Load search index when page loads
            loadSearchIndex();

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                console.log('Key pressed:', e.key);

                // Ignore if typing in input
                if (e.target.matches('input, textarea')) return;

                // Handle number keys 1-7
                if (/^[1-7]$/.test(e.key)) {
                    const navItem = document.querySelector(`.nav-item[data-shortcut="${e.key}"]`);
                    if (navItem) {
                        e.preventDefault();
                        console.log('Clicking nav item:', navItem);
                        if (navItem.href) {
                            window.location.href = navItem.href;
                        } else {
                            navItem.click();
                        }
                    }
                }

                // Handle search shortcut
                if (e.key === '/') {
                    e.preventDefault();
                    const searchTrigger = document.querySelector('[data-search="true"]');
                    if (searchTrigger) {
                        searchTrigger.click();
                    }
                }
            });

            // Search functionality
            const searchTriggers = document.querySelectorAll('[data-search="true"]');
            const searchOverlay = document.getElementById('searchOverlay');
            const searchInput = document.querySelector('.search-input');
            const searchButton = document.querySelector('.search-button');
            const searchResults = document.querySelector('.search-results');

            function performSearch(query) {
                if (!searchIndex || !query.trim()) {
                    return [];
                }

                query = query.toLowerCase();
                return searchIndex.filter(item => {
                    const titleMatch = item.title.toLowerCase().includes(query);
                    const descriptionMatch = item.description.toLowerCase().includes(query);
                    const tagMatch = item.tags.some(tag =>
                        tag.toLowerCase().includes(query)
                    );
                    return titleMatch || descriptionMatch || tagMatch;
                });
            }

            function displayResults(results) {
                if (!results.length) {
                    searchResults.innerHTML = '<div class="no-results">No results found</div>';
                    return;
                }

                searchResults.innerHTML = results.map(result => `
                    <a href="${result.url}" class="search-result">
                        <span class="search-result-title">${result.title}</span>
                        <span class="search-result-content">${result.description}</span>
                        <span class="search-result-url">${result.url}</span>
                    </a>
                `).join('');
            }

            function handleSearch() {
                const query = searchInput.value;
                console.log('Searching for:', query);
                console.log('Search index:', searchIndex);

                if (!query.trim()) {
                    searchResults.innerHTML = '<div class="no-results">Please enter a search term</div>';
                    return;
                }

                const results = performSearch(query);
                console.log('Search results:', results);
                displayResults(results);
            }

            if (searchTriggers && searchOverlay && searchInput) {
                console.log('Search elements found');

                // Add click event listener to all search triggers
                searchTriggers.forEach(trigger => {
                    trigger.addEventListener('click', (e) => {
                        e.preventDefault();
                        searchOverlay.classList.add('active');
                        searchInput.focus();
                        document.body.style.overflow = 'hidden';
                    });
                });

                // Hide search
                searchOverlay.addEventListener('click', (e) => {
                    if (e.target === searchOverlay) {
                        searchOverlay.classList.remove('active');
                        searchInput.value = '';
                        searchResults.innerHTML = '';
                        document.body.style.overflow = '';
                    }
                });

                // Handle search button click
                searchButton?.addEventListener('click', () => {
                    handleSearch();
                });

                // Handle enter key in search input
                searchInput?.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSearch();
                    }
                });

                // Handle escape key to close search
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && searchOverlay.classList.contains('active')) {
                        searchOverlay.classList.remove('active');
                        searchInput.value = '';
                        searchResults.innerHTML = '';
                        document.body.style.overflow = '';
                    }
                });
            }
        });
    </script>
</body>

</html>